var queue := new MessageQueue()
Thread.context["queue"] := queue
Thread.start(method() {
	var queue := Thread.context["queue"]->MessageQueue
	-- wait for Thread2 to signal that it's ready
	queue.getMessage()
	-- ensure that our context is independent of the change made by Thread2
	queue := Thread.context["queue"]->MessageQueue
	Console.writeLine(queue.getMessage()->String)
})
Thread.start(method() {
		var queue := Thread.context["queue"]->MessageQueue
		-- modify our context
		Thread.context["queue"] := new MessageQueue()
		-- cause Thread1 to re-fetch its queue, ensuring that it doesn't see the
		-- change we made to our context
		queue.post("ready")
		-- post a message to the original queue
		queue.post("Hello, World!")
})
