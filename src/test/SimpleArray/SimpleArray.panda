class SimplePrimitiveArray {
    constant a := [1, 2, 3, 4, 5]
    constant b := [[1, 2], [3, 4], [5]]
    constant c:ImmutablePrimitiveArray<ImmutablePrimitiveArray<Real>> := [[1, 2], [3, 4], [5]]
    constant d := [[[[[1]]]]]

    var e := [1, 2, 3, 4, 5]
    var f:PrimitiveArray<Int8> := [1, 2, 3, 4, 5]
    var g := [[1, 2], [3, 4]]
    var h:PrimitiveArray<PrimitiveArray<Int64>> := [[1, 2], [3, 4]]
    var i := []
    var j:PrimitiveArray<PrimitiveArray<ImmutablePrimitiveArray<Int16>>> := [[[129, 200], []]]

    @class
    method testCall(a:PrimitiveArray<Object>) {
        Console.writeLine("success")
    }

    @class
    method main() {
        assert a.class = class(ImmutablePrimitiveArray<Int32>)
        assert a.length = 5 & a[3] = 4
        assert b.class = class(ImmutablePrimitiveArray<ImmutablePrimitiveArray<Int32>>)
        assert c.class = class(ImmutablePrimitiveArray<ImmutablePrimitiveArray<Real>>)
        assert d.class = class(ImmutablePrimitiveArray<ImmutablePrimitiveArray<ImmutablePrimitiveArray<ImmutablePrimitiveArray<ImmutablePrimitiveArray<Int32>>>>>)

        var test := new SimplePrimitiveArray()
        assert test.e.class = class(PrimitiveArray<Int32>)
        assert test.f.class = class(PrimitiveArray<Int8>)

        test.e := [1, 2, 3]
        assert test.e.class = class(PrimitiveArray<Int32>)
        test.f := [1, 2, 3]
        assert test.f.class = class(PrimitiveArray<Int8>)

        assert test.g.class = class(PrimitiveArray<PrimitiveArray<Int32>>)
        assert test.h.class = class(PrimitiveArray<PrimitiveArray<Int64>>)
        assert test.i.class = class(PrimitiveArray<Object?>)

        assert ["Hello", "Goodbye"].class = class(PrimitiveArray<String>)

        assert test.j.class = class(PrimitiveArray<PrimitiveArray<ImmutablePrimitiveArray<Int16>>>)

        assert ["ABC", "A"].class = class(PrimitiveArray<String>)
        assert [1.2, 1].class = class(PrimitiveArray<Real>)
        assert [].class = class(PrimitiveArray<Object?>)

        testCall([1, 2, 3])
    }
}

