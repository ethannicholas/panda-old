class Test : Immutable {
    def value:Int

    constructor(value:Int) {
        self.value := value
    }

    @override
    function format(fmt:String):String {
        return value->>(String)
    }
}

var a := new PrimitiveArray<Test>(new Test(10), new Test(12))
var b := new PrimitiveArray<Test?>(new Test(13), new Test(-52))

Console.writeLine(a->>(ImmutablePrimitiveArray<Test>))
Console.writeLine(b->>(ImmutablePrimitiveArray<Test?>))

var c := new ImmutablePrimitiveArray<Test>(new Test(76), new Test(127))
var d := new ImmutablePrimitiveArray<Test?>(new Test(43), new Test(131))

Console.writeLine(c->>(PrimitiveArray<Test>))
Console.writeLine(d->>(PrimitiveArray<Test?>))