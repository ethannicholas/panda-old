package org.pandalanguage.plex

class RemappedState : State {
    def states:ImmutablePrimitiveArray<Int>

    -- FIXME: varargs calls should be creating Lists, not PrimitiveArrays, which means
    -- they can pass in ImmutablePrimitiveArrays directly
    constructor(states:Int...) {
        super.constructor([])
        self.states := new ImmutablePrimitiveArray<Int>(states, 0, states.length)
    }

    constructor(states:ImmutablePrimitiveArray<Int>) {
        super.constructor([])
        self.states := states
    }

    @override
    function accept(c:Char):Bit {
        assert false
        return false
    }

    @override
    function ->>():String {
        var result := new MutableString()
        result.append("new RemappedState(")
        for i in 0 ... states.length - 1 {
            if i > 0
                result.append(", ")
            result.append(states[i])
        }
        result.append(")")
        return result->>(String)
    }    
}