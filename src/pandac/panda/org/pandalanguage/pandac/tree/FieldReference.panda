package org.pandalanguage.pandac.tree

uses org.pandalanguage.pandac.tree.FieldNode
uses org.pandalanguage.pandac.types.Type

================================================================================
Represents a reference to a static or instance field.
================================================================================
class FieldReference : Value {
    def object:Value

    ============================================================================
    The field being referenced.
    ============================================================================
    def field:FieldNode

    @pre(!object.type.isPrimitive)
    constructor(position:Position, object:Value, field:FieldNode) {
        super.constructor(position, field.type->(Type))
        self.object := object
        self.field := field
    }

    @override
    function format(fmt:String):String {
        if object->>(String) = "self"
            return field.name
        return object + "." + field.name
    }
}