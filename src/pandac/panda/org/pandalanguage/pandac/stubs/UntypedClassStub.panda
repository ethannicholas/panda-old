package org.pandalanguage.pandac.stubs

uses org.pandalanguage.pandac.compiler.LookupContext
uses org.pandalanguage.pandac.parser.ParseNode
uses org.pandalanguage.pandac.tree.Annotations
uses org.pandalanguage.pandac.tree.Position

================================================================================
Represents a parsed but not-yet-compiled class prior to symbol resolution.
================================================================================
class UntypedClassStub : ClassStub {
    def superclass:ParseNode?

    def interfaces:ImmutableArray<ParseNode>

    def methods:ImmutableArray<UntypedMethodStub>

    def fields:ImmutableArray<UntypedFieldStub>

    def genericParameters:ImmutableArray<UntypedGenericParameter>

    @pre(!name.contains(" "))
    constructor(position:Position, name:String, isInterface:Bit, 
            annotations:Annotations, lookupContext:LookupContext, 
            superclass:ParseNode?, interfaces:ListView<ParseNode>, 
            methods:ListView<UntypedMethodStub>,
            fields:ListView<UntypedFieldStub>, invariants:ListView<ParseNode>,
            genericParameters:ListView<UntypedGenericParameter>) {
        super.constructor(position, name, isInterface, annotations, 
                lookupContext, invariants)
        self.superclass := superclass
        self.interfaces := new ImmutableArray<ParseNode>(interfaces)
        self.methods := new ImmutableArray<UntypedMethodStub>(methods)
        self.fields := new ImmutableArray<UntypedFieldStub>(fields)
        self.genericParameters := new ImmutableArray<UntypedGenericParameter>(
                genericParameters)
    }

    @override
    function format(fmt:String):String {
        return "\{name}(\{fields}, \{methods})"
    }
}